source "toolchain/Kconfig"

menu "Base packages"

config SRC_BASEDIR
	string "Package source trees search path"
	default "$(HOME)/src:/usr/src"

	help
	  The list of directories, separated by columns, under which
	  the packages source trees will be looked for. If relative,
	  it is relative to Mkrootfs directory.

source "base/Kconfig"
source "linux/Kconfig"
source "busybox/Kconfig"
source "fuse/Kconfig"
source "xenomai/Kconfig"
source "ltp-old/Kconfig"
source "ltp/Kconfig"
source "tests/Kconfig"

endmenu

menu "Tools"

source "e2fsprogs/Kconfig"
source "gdb/Kconfig"
source "kexec-tools/Kconfig"
source "libpcap/Kconfig"
source "make/Kconfig"
source "ncurses/Kconfig"
source "netcat/Kconfig"
source "strace/Kconfig"
source "tcpdump/Kconfig"
source "valgrind/Kconfig"

endmenu


menu "Output"

config OUT_TAR
       bool "Generate a tarball"

       help
	 Generate a root filesystem tarball. Enabling this option
	 requires tar to be installed.

config OUT_NFS
       bool "Generate an NFS root filesystem"

       help
	 Generate root filesystem for mounting over NFS. Note that
	 this option uses an rsync daemon to be run as super user,
	 launched with sudo. So, in order for this option to work, you
	 will need to be sudoer at least for the rsync command. You
	 will also need hexdump to generate the rsync daemon password.

if OUT_NFS

config OUT_RSYNCD_PORT
       int "Rsync daemon port start"
       range 0 65535
       default 31000

       help
	 NFS root filesystem uses an rsync daemon running as
	 root. This configuration option allows to choose at what port
	 the daemon will start to try running.

endif

config OUT_INITRAMFS
       bool "Generate a cpio archive suitable for an initramfs"

       help
	 Generate a cpio archive, with options suitable for use by the
	 Linux kernel as an initramfs.

if OUT_INITRAMFS

choice
	prompt "Compression"

config OUT_INITRAMFS_GZ
	bool "Gzip"

config OUT_INITRAMFS_XZ
	bool "Xz"

endchoice

config OUT_INITRAMFS_TFTP
	bool "Install the initramfs in a tftp directory"
	
	help
	  Install the initramfs image in a tftp directory, allowing a 
	  network boot with initramfs.

if OUT_INITRAMFS_TFTP

config OUT_INITRAMFS_DEST
	string "Initramfs destination"
	default "/var/lib/tftpboot/$(MKR_BOARD)/initrd-$(KERNELVERSION)"

	help
	  Directory where the initramfs will be copied. The copy uses
	  scp if this destination has the form host:path or user@host:path.

endif	

endif

config SKIP_ROOTFS
       bool "Skip reduced root filesystem generation"
       default y

       help
	 With this option disabled, mkrootfs works in two steps: it
	 generates a "staging" directory where all files of all
	 packages are installed, with debug symbols, then a "rootfs"
	 directory which contains only stripped files which will be
	 needed at run-time.

	 Enabling this option will skip the generation of the "rootfs"
	 directory. This speeds-up compilation in cases like using an
	 NFS root filesystem when the size of the root filesystem does
	 not matter.

	 Note that if you do not enable this option, you will need the
	 strip tool provided by the toolchain you use.

endmenu
